# This workflow uses actions that are not certified by GitHub.
# They are provided by a third-party and are governed by
# separate terms of service, privacy policy, and support
# documentation.

name: Flutter_Android

on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
    - uses: actions/setup-java@v2
      with:
        distribution: 'zulu'
        java-version: '11'
    - uses: subosito/flutter-action@v2
      with:
        flutter-version: '2.10.1'
    - run: flutter pub get
    - run: flutter test
    - run: flutter build apk
    - run: cp ./build/app/outputs/flutter-apk/app-release.apk ./
    - name: Upaload to gdrive
      uses: adityak74/google-drive-upload-git-action@main
      with: 
        credentials: "eyAidHlwZSI6ICJzZXJ2aWNlX2FjY291bnQiLCAicHJvamVjdF9pZCI6ICJzbWFydC1vYXNpcy0zNDA2MDEiLCAicHJpdmF0ZV9rZXlfaWQiOiAiMDllYjkyYmVkOGY1YjY1Mjg5NmIyZDFmOWFhZTUzYTk3YzE4ZWM3ZSIsICJwcml2YXRlX2tleSI6ICItLS0tLUJFR0lOIFBSSVZBVEUgS0VZLS0tLS1cbk1JSUV2UUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktjd2dnU2pBZ0VBQW9JQkFRQ3o1ZDlMSFpJRHBva0ZcbmVkcnI4SGtaRlNrV0VDRWMveEVPR0xCbDFKK2pRM3ZCUFVMZzBaMkZYQzZmaTNtL2lNV1JLN1kxMlU4M042MVlcbjFPMGo1L2ZzRVdKWlFsWWtRTFh4KytxUHZjaUIvbnNsblJtZDM5cVo1dW95RXg3RTMxcEhDSkZJT05FZ2d0OUdcblNQMUg4dkNldVJ1Z1hvYXk5Q0Q0QktnQXZoYk9ZSEh2TEpEbUlKY2ovdWJPcTFNeWlWYnhMajJQTjdKczdER1pcbnBQTS9FVXQ3T1hFR0M5ckpra0NyYlFvQStRRkdwRUZqdWxveXZDZzZHaE9kaDNxTE1WNlAwd3Uxcjk3cnJwNlpcbk13MEJ4WjYybG5wd0ZzakppNWt4dGVGUEVnNEN5d3NzNHpxMEo5T00yai92Yzl3SmFJY1JCREk3aitLUzlzcElcbjdwWnFmT25kQWdNQkFBRUNnZ0VBQVVKN2lpanVmQmFhendXTm1XOHF1MTZZWVpvVUNnSWZPa1R6Y1hHbEtaMVNcbi9sYXV3SG9VWDVFOE9aMXAzWStweks0U1o5Vmx0K0RtMXBIYmZRL0pVRWRSeXluWmtnWDJWM2ZPVFdaSGlTZFBcbndvakIvcDRhcW4yVm9kL0V3OENENTl6aVo0emhOYVA2eCtiWmZFYkRsYXBtS1U1bzNyQ204RVExSzkyZFFSWWtcbmFKdWRQdW8xeDFMZDNOWDJXNjVHeGg5a0xybFlXdmFXMnhmbEV1aXVyWWZzSnJaMkhtTDBvTmxZb0RLMGJKQm5cbjZxOFdKY2YxRXJHb09PalFPUUdRYm50UzN1ZnNaOUduWmtRUENGcGx2N2VDTnZwQkdqVWJVNzJmbFJBNUFnSTBcbkVCcUpFYVlpay9wZ2F3clRWZGdkSGM5NTVsVHVNWVlQcnNxRlhuL3hZUUtCZ1FEejBaZGllYUQyMmE5bUd0YW9cbk9wRU5FMjM3ZDBxdFZneTdtYjF6NERFTnJhYjlRWXdPODZLbUp5ZmsvUGJPYmthRk1Yb3ExalhnZTZRVGs3Q1FcbjkydXBoaHdka3FkY3RRQmg3VHJ2UkR2VE03Qm1KV3ZrSncraWFRWGZaclIwekN3WXlXaXBGb3VKVWVCMkpkVy9cbnJDME8wWmJoY1JJN0tqcisxUkJQdm5ISTN3S0JnUUM4NHI0alJxcHlac0Z6NHNtT0R2R2xJVTluUUtpUVJ1M2NcbjYra0c3MWR4NnlodnFST2VJR1JqUHphSEpYSnZUQ00vaTBBZ2VaTkxJaWxSWHQyVlpJWnRNOWR4andQU1IvM0pcbkZ5eTk5NUZZVkNaUi9lNHlFZFhJZDJ3R0ZybU5hNW1JQmlNWUFRdnZaQWNvaWlRV1Q0cjFqVEhXcmU3QmJObjBcbmo5bUZaSVFZd3dLQmdBM2VqazM3dlR4TmhieTVLaHpIdUJpV1VsdExuZVBlVVRzYXM3d3p0SmFpbWkwdDNWbThcbllqUXhaZ09Rb0RsOTdHVUhPM3ZVVTV4QmJFUHcwc3BzU0tPTURXMWhPa1A3eDluS05PQUhjWi9DQVBiT2lpU2dcblZETlk1Z3lmT3dTcDJKaFFYTFBCcEk1YktmbU9qV29wMFNaV3BjNk5NQXhOaXEyVVVTazRIQ0RoQW9HQkFMa1hcbkIzTFI0RnhTVE9jZUtKdklFUXJiWlUrc2tJRXd3QTFvTHVUWXpEdVpUL3A3Ri9vdmk2K2xWZTJBeUc0L2tackdcbi9ZUFZIbnpWY04rSHNtS2VLd3YvYlBLZVRnUlUvMTk2RWlIazRzeEhTWFcyK3g2ZFUzd3BhZlZkZDE0WlBrMklcbmxnTURvNHBsM28zZk1CV2N4SEp5ZFpBRXlKMUo2Um81aTlHbSticTVBb0dBTXRkT3d5MzFlNXA5cXNYdklwYTJcbjgySndtelp6bmprd0h6YlpsOGhucFJ4d1VzUVpZUFAvRUluS1JLQVdUa2YxUllCUTRRUjMzblVBdkxUYkI0VVJcbkJZUm1KdTZrK1l3WTExenMvc3Bla2w4RDRhcHJ4S1FVcFplTm05RzZ4bWZFMjZjR2xRWUxZbFgvd0ZFRmtBeitcbnJqMjFKTWVUSkFvMzgzN2g5VGkzSGxZPVxuLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLVxuIiwgImNsaWVudF9lbWFpbCI6ICJnaXRodWItdXBsb2FkQHNtYXJ0LW9hc2lzLTM0MDYwMS5pYW0uZ3NlcnZpY2VhY2NvdW50LmNvbSIsICJjbGllbnRfaWQiOiAiMTE3NjAyNDM3MjU5ODc5MzczMjA1IiwgImF1dGhfdXJpIjogImh0dHBzOi8vYWNjb3VudHMuZ29vZ2xlLmNvbS9vL29hdXRoMi9hdXRoIiwgInRva2VuX3VyaSI6ICJodHRwczovL29hdXRoMi5nb29nbGVhcGlzLmNvbS90b2tlbiIsICJhdXRoX3Byb3ZpZGVyX3g1MDlfY2VydF91cmwiOiAiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vb2F1dGgyL3YxL2NlcnRzIiwgImNsaWVudF94NTA5X2NlcnRfdXJsIjogImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL3JvYm90L3YxL21ldGFkYXRhL3g1MDkvZ2l0aHViLXVwbG9hZCU0MHNtYXJ0LW9hc2lzLTM0MDYwMS5pYW0uZ3NlcnZpY2VhY2NvdW50LmNvbSIgfQ=="
        filename: "./app-release.apk"
        folderId: "1pe-5f4szRLHg6CFMDAAMAVOeDop8etta"
        name: "simplepay_release.apk"
        overwrite: "true"
      
        
    #- run: git add ./app-release.apk
    #- run: git commit -m "release"
    #- run: git push origin master 
#   # - run: flutter build appbundle
